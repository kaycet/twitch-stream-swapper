<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Twitch Stream Swapper - Settings</title>
  <link rel="stylesheet" href="options.css">
</head>
<body>
  <div class="container">
    <header>
      <h1>‚öôÔ∏è Settings</h1>
      <a href="popup.html" class="back-link">‚Üê Back to Extension</a>
    </header>

    <div class="content">
      <!-- Basic Settings -->
      <section class="settings-section">
        <h2>Basic Settings</h2>
        
        <div class="setting-item">
          <label for="checkInterval">
            <span>Check Interval</span>
            <span class="hint">How often to check if streams go live</span>
          </label>
          <select id="checkInterval">
            <option value="60000">1 minute</option>
            <option value="120000">2 minutes</option>
            <option value="300000">5 minutes</option>
            <option value="600000">10 minutes</option>
          </select>
        </div>

        <div class="setting-item">
          <label for="redirectEnabled" class="toggle-row">
            <span class="toggle-text">
              <span>Enable Auto-Switching</span>
              <span class="hint">Automatically redirect to higher priority streams when they go live</span>
            </span>
            <input type="checkbox" id="redirectEnabled">
          </label>
        </div>

        <div class="setting-item">
          <label for="promptBeforeSwitch" class="toggle-row">
            <span class="toggle-text">
              <span>Prompt Before Switching</span>
              <span class="hint">Show a notification prompt before switching streams (default: off - auto-swaps)</span>
            </span>
            <input type="checkbox" id="promptBeforeSwitch">
          </label>
        </div>
      </section>

      <!-- Category Fallback -->
      <section class="settings-section">
        <h2>Category Fallback</h2>
        <p class="section-description">When no streams in your list are live, show a random stream from a category</p>
        
        <div class="setting-item">
          <label for="fallbackCategory">
            <span>Category Name</span>
            <span class="hint">Twitch category/game name (e.g., "Just Chatting", "League of Legends")</span>
          </label>
          <input 
            type="text" 
            id="fallbackCategory" 
            placeholder="Just Chatting"
            maxlength="50"
            autocomplete="off"
          >
        </div>

        <div class="setting-item">
          <label for="fallbackEnabled" class="toggle-row">
            <span class="toggle-text">
              <span>Enable Category Fallback</span>
            </span>
            <input type="checkbox" id="fallbackEnabled">
          </label>
        </div>
      </section>

      <!-- Supporter Features -->
      <section class="settings-section premium-section">
        <h2>
          Supporter Features <span class="premium-badge">‚≠ê</span>
        </h2>
        <p class="section-description">
          Honor system: if you support development, feel free to enable these. If you can‚Äôt right now, no worries.
        </p>

        <div class="setting-item">
          <label for="premiumStatus" class="toggle-row">
            <span class="toggle-text">
              <span>Enable Supporter Features</span>
              <span class="hint">No verification codes. Please be cool.</span>
            </span>
            <input type="checkbox" id="premiumStatus">
          </label>
        </div>

        <div class="setting-item premium-feature">
          <label for="notificationsEnabled" class="toggle-row">
            <span class="toggle-text">
              <span>Desktop Notifications</span>
              <span class="hint premium-hint">Get notified when streams go live</span>
            </span>
            <input type="checkbox" id="notificationsEnabled">
          </label>
        </div>

        <div class="setting-item premium-feature">
          <label for="theme">
            <span>Theme</span>
            <span class="hint premium-hint">Choose a custom theme for the extension</span>
          </label>
          <select id="theme">
            <option value="default">Default</option>
            <option value="dark">Dark</option>
            <option value="neon">Neon</option>
            <option value="custom">Custom</option>
          </select>
        </div>

        <div class="setting-item premium-feature" id="customThemeSection" style="display:none;">
          <label>
            <span>Custom Theme</span>
            <span class="hint premium-hint">Pick a few key colors. (Applies to popup + settings.)</span>
          </label>
          <div class="custom-theme-grid">
            <div class="color-row">
              <span class="color-label">Accent</span>
              <input type="color" id="customAccent" />
              <input type="text" id="customAccentHex" class="hex-input" maxlength="7" placeholder="#9147FF" autocomplete="off" />
            </div>
            <div class="color-row">
              <span class="color-label">Background</span>
              <input type="color" id="customBg" />
              <input type="text" id="customBgHex" class="hex-input" maxlength="7" placeholder="#0E0E10" autocomplete="off" />
            </div>
            <div class="color-row">
              <span class="color-label">Surface</span>
              <input type="color" id="customPanel" />
              <input type="text" id="customPanelHex" class="hex-input" maxlength="7" placeholder="#18181B" autocomplete="off" />
            </div>
            <div class="color-row">
              <span class="color-label">Text</span>
              <input type="color" id="customText" />
              <input type="text" id="customTextHex" class="hex-input" maxlength="7" placeholder="#EFEFF1" autocomplete="off" />
            </div>
            <div class="color-row">
              <span class="color-label">Border</span>
              <input type="color" id="customBorder" />
              <input type="text" id="customBorderHex" class="hex-input" maxlength="7" placeholder="#2D2D35" autocomplete="off" />
            </div>
            <div class="color-row">
              <span class="color-label">Muted</span>
              <input type="color" id="customMuted" />
              <input type="text" id="customMutedHex" class="hex-input" maxlength="7" placeholder="#ADADB8" autocomplete="off" />
            </div>
          </div>
          <div class="hint" style="margin-top: 10px;">
            Tip: set Accent to your favorite brand color; keep Background/Surface dark for best readability.
          </div>

          <div class="setting-item" style="margin-top: 12px; margin-bottom: 0;">
            <button id="customThemeApplyBtn" class="btn btn-secondary" disabled>Apply Custom Theme</button>
            <div class="hint" style="margin-top: 6px;">Requires confirmation.</div>
          </div>
        </div>

        <div class="premium-reminder" id="premiumReminder" style="display: none;">
          <p>üí° <strong>Supporter Feature:</strong> Enable Supporter Features (honor system) to use this.</p>
        </div>
      </section>

      <!-- Analytics (Supporter) -->
      <section class="settings-section premium-section" id="analyticsSection" style="display: none;">
        <h2>
          Analytics
          <span class="premium-badge">‚≠ê</span>
        </h2>

        <div id="analyticsContent">
          <div class="analytics-stats">
            <div class="stat-item">
              <span class="stat-label">Total Switches:</span>
              <span class="stat-value" id="totalSwitches">0</span>
            </div>
            <div class="stat-item">
              <span class="stat-label">Last Switch:</span>
              <span class="stat-value" id="lastSwitch">Never</span>
            </div>
          </div>

          <div class="viewing-time">
            <h3>Viewing Time by Stream</h3>
            <div id="viewingTimeList" class="viewing-time-list"></div>
          </div>

          <button id="clearAnalytics" class="btn btn-secondary">Clear Analytics</button>
        </div>
      </section>

      <!-- Donations -->
      <section class="settings-section donation-section">
        <h2>üíù Support the Developer</h2>
        <p class="section-description">
          Love this extension? Consider supporting development on Ko-fi.
        </p>

        <div class="donation-buttons">
          <a id="kofiBtn" href="#" target="_blank" rel="noopener noreferrer" class="btn btn-donation kofi">
            ‚òï Support on Ko-fi
          </a>
        </div>

        <div class="premium-activation">
          <p class="hint">
            After donating, you can enable ‚ÄúSupporter Features‚Äù above. There are no activation codes.
          </p>
        </div>
      </section>

      <!-- Advanced -->
      <section class="settings-section">
        <h2>Advanced</h2>
        <details class="advanced-details">
          <summary>Developer / Power-user settings</summary>
          <p class="section-description">
            Most users should leave these alone. Changing these incorrectly can break API access.
          </p>

          <div class="setting-item">
            <label for="overrideClientIdEnabled" class="toggle-row">
              <span class="toggle-text">
                <span>Override built-in Twitch Client ID</span>
              </span>
              <input type="checkbox" id="overrideClientIdEnabled">
            </label>
            <div class="hint">Only needed for testing or if you want to use your own Twitch app credentials.</div>
          </div>

          <div class="setting-item">
            <label for="clientId">
              <span>Twitch Client ID</span>
              <span class="hint">
                Optional override. Get it from <a href="https://dev.twitch.tv/console/apps" target="_blank">Twitch Developer Console</a>.
              </span>
            </label>
            <input 
              type="text" 
              id="clientId" 
              placeholder="Leave disabled to use built-in Client ID"
              maxlength="64"
              autocomplete="off"
            >
          </div>

          <div class="setting-item" style="margin-top: 12px;">
            <button id="advancedApplyBtn" class="btn btn-secondary" disabled>Apply Advanced Settings</button>
            <div class="hint" style="margin-top: 6px;">Requires confirmation. Only use if you know what you‚Äôre doing.</div>
          </div>
        </details>
      </section>

      <!-- Status / Save feedback (autosave) -->
      <div class="actions">
        <div id="saveStatus" class="save-status"></div>
      </div>
    </div>

    <div class="made-with-love">
      Made with trans üè≥Ô∏è‚Äç‚ößÔ∏è love
    </div>
  </div>

  <script type="module" src="options.js"></script>
</body>
</html>

